<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ApnaParivar - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css" />
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>

    <div class="sidebar">
        <div class="logo">ApnaParivar</div>
        <nav>
            <a href="dashboard.html" class="nav-link active">üè† Dashboard</a>
            <a href="#tree" class="nav-link">üå≥ Tree View</a>
            <a href="#list" class="nav-link">üìã List View</a>
            <a href="admin_panel.html" class="nav-link">‚öô Admin Panel</a>
        </nav>
        <hr class="sidebar-divider">
        <p class="sidebar-footer">&nbsp;</p>
    </div>

    <div class="main-content">

        <header class="site-header">
            <div class="header-inner">
                <h1 class="brand">ApnaParivar</h1>
            </div>
        </header>

        <!-- Dashboard Section -->
        <section id="dashboard">
                        <div class="header">
                                <h1 id="welcomeName">Welcome!</h1>
                                <div>
                                    <button class="btn-primary" id="addMemberBtn" disabled>‚ûï Add New Member</button>
                                    <button class="btn-ghost" id="manageAdminsBtn" style="display:none;">Manage Admins</button>
                                </div>
                        </div>

                                    <div id="familiesSection" class="card" style="margin-bottom:16px;">
                                        <h3>Your Families</h3>
                                        <label for="familySelect" class="sr-only">Select family</label>
                                        <select id="familySelect" class="select-input" aria-label="Select family">
                                            <option value="">-- Select a family --</option>
                                        </select>
                                        <div id="families" class="families-list" aria-live="polite"></div>
                                        <div class="create-family-row">
                                            <input id="familyName" class="input-full" placeholder="Create new family (e.g., Sharma)" aria-label="New family name" />
                                            <button id="createFamilyBtn" class="btn-primary">Create Family</button>
                                        </div>
                                    </div>

                            <!-- Add Member Modal -->
                            <div id="addMemberModal" class="modal-backdrop" aria-hidden="true">
                                <div class="modal" role="dialog" aria-modal="true" aria-labelledby="addMemberTitle">
                                    <h3 id="addMemberTitle">Add Family Member</h3>
                                    <div class="card">
                                        <div class="form-row">
                                            <input id="am_name" type="text" placeholder="Full name" aria-label="Full name" />
                                            <select id="am_gender" aria-label="Gender">
                                                <option value="">Gender</option>
                                                <option value="male">Male</option>
                                                <option value="female">Female</option>
                                                <option value="other">Other</option>
                                            </select>
                                        </div>
                                        <div class="form-row">
                                            <select id="am_relationType" aria-label="Relation type">
                                                <option value="">Relation</option>
                                                <option value="parent">Parent of selected</option>
                                                <option value="child">Child of selected</option>
                                                <option value="spouse">Spouse of selected</option>
                                                <option value="sibling">Sibling of selected</option>
                                                <option value="none">No relation / standalone</option>
                                            </select>
                                            <select id="am_relationTarget" aria-label="Relation target">
                                                <option value="">Select person (optional)</option>
                                            </select>
                                        </div>
                                        <div class="form-row">
                                            <input id="am_age" type="number" placeholder="Age" />
                                            <input id="am_relationText" placeholder="Relation (e.g., father)" />
                                        </div>
                                        <div class="modal-actions">
                                            <button id="am_cancel" class="btn-ghost">Cancel</button>
                                            <button id="am_submit" class="btn-primary">Add Member</button>
                                        </div>
                                    </div>

                                                    <!-- Manage Admins Modal / Admin Panel Link -->
                                                    <div id="manageAdminsModal" class="modal-backdrop" aria-hidden="true">
                                                        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="manageAdminsTitle">
                                                            <h3 id="manageAdminsTitle">Manage Admins</h3>
                                                            <div class="card">
                                                                <div style="margin-bottom:8px;">
                                                                    <a href="admin_panel.html" class="btn-primary" style="display:inline-block;text-decoration:none;">Open Admin Panel</a>
                                                                </div>
                                                                <div id="adminsList" style="margin-bottom:8px;"></div>
                                                                <div class="form-row">
                                                                    <input id="ma_email" placeholder="Admin email to invite" />
                                                                    <button id="ma_add" class="btn-primary">Invite</button>
                                                                </div>
                                                                <div class="modal-actions">
                                                                    <button id="ma_close" class="btn-ghost">Close</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                </div>
                            </div>

            <div class="card highlight-card">
                <h2>Today in History!</h2>
                <p id="highlightText">No events for today.</p>
            </div>

            <div class="stats-grid">
                <div class="card stat-card">
                    <div class="value" id="totalMembers">-</div>
                    <div class="label">Total Members</div>
                </div>
                <div class="card stat-card">
                    <div class="value" id="latestAddition">-</div>
                    <div class="label">Latest Addition</div>
                </div>
                <div class="card stat-card">
                    <div class="value" id="nextAnniv">-</div>
                    <div class="label">Next Anniversary</div>
                </div>
            </div>
        </section>

        <!-- Tree Section -->
        <section id="tree">
            <div class="header">
                <h2>Family Tree Visualization</h2>
            </div>
            <div class="card tree-container">
                <h3>Family Tree</h3>
                <div class="node-row">
                    <div class="node">
                        <img src="" class="profile-pic" alt="" />
                        <div class="name" id="node1Name">-</div>
                        <div class="relation" id="node1Relation">-</div>
                    </div>
                    <div class="node">
                        <img src="" class="profile-pic" alt="" />
                        <div class="name" id="node2Name">-</div>
                        <div class="relation" id="node2Relation">-</div>
                    </div>
                </div>

                <div class="node-row" style="position: relative;">
                    <div class="spouse-line"></div>
                    <div class="node">
                        <img src="" class="profile-pic highlight" alt="" />
                        <div class="name" id="focusName">-</div>
                        <div class="relation" id="focusRelation">-</div>
                    </div>
                    <div class="node">
                        <img src="" class="profile-pic highlight" alt="" />
                        <div class="name" id="spouseName">-</div>
                        <div class="relation" id="spouseRelation">-</div>
                    </div>
                </div>

                <div class="node-row">
                    <div class="node">
                        <img src="" class="profile-pic" alt="" />
                        <div class="name" id="child1Name">-</div>
                        <div class="relation" id="child1Relation">-</div>
                    </div>
                    <div class="node">
                        <img src="" class="profile-pic" alt="" />
                        <div class="name" id="child2Name">-</div>
                        <div class="relation" id="child2Relation">-</div>
                    </div>
                </div>

                <p class="hint-text">*Click any profile to view details or recenter the tree.</p>
            </div>
        </section>
    </div>

    <script src="js/firebaseConfig.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/nav.js"></script>
</body>
</html>
